package com.yishan.javaplus.worker.service;import com.amazon.sqs.javamessaging.ProviderConfiguration;import com.amazon.sqs.javamessaging.SQSConnection;import com.amazon.sqs.javamessaging.SQSConnectionFactory;import com.amazonaws.auth.DefaultAWSCredentialsProviderChain;import com.amazonaws.services.sqs.AmazonSQS;import com.amazonaws.services.sqs.AmazonSQSClientBuilder;import com.amazonaws.services.sqs.model.DeleteMessageRequest;import com.amazonaws.services.sqs.model.Message;import com.amazonaws.services.sqs.model.ReceiveMessageRequest;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.beans.factory.annotation.Value;import org.springframework.context.annotation.Bean;import org.springframework.stereotype.Service;import javax.jms.*;import java.io.Serializable;import java.util.List;@Servicepublic class JmsSqsService{    private final Logger logger = LoggerFactory.getLogger(getClass());    private String queueName = "javaplus";    private AmazonSQS amazonSQS = AmazonSQSClientBuilder            .standard()            .withCredentials(new DefaultAWSCredentialsProviderChain())            .build();    String myQueueUrl = getUrlByQueueName(amazonSQS, queueName);    private void getMessage() {        logger.debug("Receiving messages: ");        ReceiveMessageRequest receiveMessageRequest = new ReceiveMessageRequest(getUrlByQueueName(amazonSQS, queueName));        List<Message> messages = amazonSQS.receiveMessage(receiveMessageRequest).getMessages();        for (Message message : messages) {            logger.debug("here is your message", message.getBody());            try {                System.out.println("Received: " + ((TextMessage) message).getText());            } catch (JMSException e) {                e.printStackTrace();            }            try {                ((TextMessage) message).acknowledge();            } catch (JMSException e) {                e.printStackTrace();            }            System.out.println("Acknowledged: " + message.getMessageId());            logger.debug(" now deleting a message.\n");            final String messageReceiptHandle = messages.get(0).getReceiptHandle();            DeleteMessageRequest deleteMessageRequest = new DeleteMessageRequest(myQueueUrl, messageReceiptHandle);            amazonSQS.deleteMessage(deleteMessageRequest);        }    }    private String getUrlByQueueName(AmazonSQS amazonSQS, String queueName) {        return amazonSQS.getQueueUrl(queueName).getQueueUrl();    }    private void getMsg() throws JMSException{        //Destination destination = new Destination();        SQSConnectionFactory connectionFactory = new SQSConnectionFactory(new ProviderConfiguration(), AmazonSQSClientBuilder.defaultClient());        SQSConnection connection = connectionFactory.createConnection();        Session session = connection.createSession(false, Session.CLIENT_ACKNOWLEDGE);        Queue messageConsumer = session.createQueue(queueName);        logger.debug(messageConsumer.getQueueName());    }//    public static void main(String[] args){//        JmsSqsService jmsSqsService = new JmsSqsService();//        try {//            jmsSqsService.getMsg();//        }catch(JMSException ignored){//        }////    }}