package com.yishan.javaplus.extend.security;import com.yishan.javaplus.config.AppConfig;import com.yishan.javaplus.domain.User;import com.yishan.javaplus.repository.UserRepository;import org.junit.Test;import org.junit.runner.RunWith;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.mobile.device.Device;import org.springframework.mobile.device.LiteDevice;import org.springframework.test.context.ActiveProfiles;import org.springframework.test.context.ContextConfiguration;import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;import org.springframework.test.context.web.WebAppConfiguration;import javax.transaction.Transactional;import static junit.framework.TestCase.assertEquals;@WebAppConfiguration@ContextConfiguration(classes = {AppConfig.class})@RunWith(SpringJUnit4ClassRunner.class)@ActiveProfiles("unit")public class JwtTokenUtilTest {    @Autowired    private UserRepository userRepository;    @Autowired    private JwtTokenUtil jwtTokenUtil;    @Test    @Transactional    public void getUsernameFromTokenTest(){        User uu = new User();        uu.setUsername("James");        uu.setPassword("66666");        uu.setEmail("abc@123.com");        uu.setFirstName("Tesla");        uu.setLastName("Nicola");        userRepository.save(uu);        Device d = new LiteDevice();        String token = jwtTokenUtil.generateToken(uu,d);        jwtTokenUtil.getUsernameFromToken(token);        String expected = jwtTokenUtil.getUsernameFromToken(token);        assertEquals("James",expected);    }}